{% extends '/inventories/index.html' %}
{% import '/base/html-renderer.html' as renderer %}

{% block title %}
{% if 'edit' in request.path %}
แก้ไข
{% else %}
นำเข้าสินค้า
{% endif %}
{% endblock %}
{% block dashboard_title %}
{{ self.title() }}
{% endblock %}

{% block breadcrumbs %}
<div class="active section">{{ item_register.description }}</div>
{% endblock %}

{% block content %}
<div>
  <form class="ui form" method="POST" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="three fields">
      {{ renderer.render_select(form.item) }}
      {{ renderer.render_field(form.quantity) }}
      {{ renderer.render_field(form.price) }}
    </div>
    {{ form.csrf_token }}
    {{ renderer.render_fileinput(form.bill_file)}}
    <div class="two fields">
      {{ renderer.render_select(form.warehouse) }}
      {{ renderer.render_select(form.position) }}
    </div>

    <button class="ui primary button" type="submit">ยืนยันข้อมูล</button>
  </form>
</div>
{% endblock content %}

{% block additional_js %}
<script type="text/javascript">
    $(".attach-file-{{ form.bill_file.name }}").click(function () {
        $("#{{ form.bill_file.name }}").click();
    });

    $('#{{ form.bill_file.name }}')
        .on('change', function (e) {
            var name = e.target.files[0].name;
            $('.attach-file-{{ form.bill_file.name }}', $(e.target).parent()).val(name);
        });
</script>
{% endblock additional_js %}