{% extends '/base/default-dashboard.html' %}
{% import '/base/html-renderer.html' as renderer %}

{% block title %}Items{% endblock %}
{% block dashboard_title %}สินค้า{% endblock %}
{% block breadcrumbs %}
<div class="ui breadcrumb">
  <div class="active section">สินค้า</div>
</div>
{% endblock %}

{% block content %}
<div>
  <table class="ui celled table">
    <thead>
      <tr>
        <th>รูปสินค้า</th>
        <th>ชื่อสินค้า</th>
        <th>คำอธิบาย</th>
        <th>น้ำหนัก</th>
        <th>หน่วย</th>
        <th>ขนาด ( กว้าง x สูง x ลึก )</th>
        <th>หมวดหมู่</th>
        <th>ผู้ใช้</th>
        <th>แก้ไข / ลบข้อมูล</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td data-label="Image">
          <div>
            {% if not item.image %}
            <img src=" {{ url_for('static', filename='/images/image.png' ) }}" width="70">
            {% else %}
            <img src="{{ url_for('items.image', item_id=item.id, filename=item.image.filename) }}" width="70">
            {% endif %}
          </div>
        </td>
        <td data-label="Name">{{ item.name }}</td>
        <td data-label="Description">{{ item.description }}</td>
        <td data-label="Weight">{{ item.weight }}</td>
        <td data-label="Unit">{{ item.unit }}</td>
        <td data-label="Size">{{ item.size.width }} x {{item.size.height }} x {{ item.size.deep }} </td>
        <td data-label="Categories">{{ item.categories|join(', ') }}</td>
        <td data-label="Weight">{{ item.user.first_name }} {{ item.user.last_name }}</td>
        <td>
          <a class="ui primary icon button" href="{{ url_for('items.edit', item_id=item.id) }}">
            <i class="edit icon"></i>
          </a>
          <a class="ui red icon button" href="{{ url_for('items.delete', item_id=item.id) }}">
            <i class="trash icon"></i>
          </a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>

  <a class="ui primary button" href="{{ url_for('items.add') }}">
    เพิ่มสินค้า
  </a>


</div>
{% endblock %}

{% block additional_js %}
<script type="text/javascript">
  $(".attach-file-pic").click(function () {
    $(this).parent().find("#pic").click();
  });

  $('#pic')
    .on('change', function (e) {
      var name = e.target.files[0].name;
      $('.attach-file-pic', $(e.target).parent()).val(name);
    });
</script>

{% endblock additional_js %}